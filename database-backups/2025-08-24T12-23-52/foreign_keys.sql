-- Foreign Key Constraints

ALTER TABLE "achievement_preferences" ADD CONSTRAINT "achievement_preferences_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "admin_actions" ADD CONSTRAINT "admin_actions_admin_id_fkey" FOREIGN KEY ("admin_id") REFERENCES "users" ("id");
ALTER TABLE "admin_actions" ADD CONSTRAINT "admin_actions_target_user_id_fkey" FOREIGN KEY ("target_user_id") REFERENCES "users" ("id");
ALTER TABLE "ai_automation_actions" ADD CONSTRAINT "ai_automation_actions_conversation_id_fkey" FOREIGN KEY ("conversation_id") REFERENCES "openphone_conversations" ("id");
ALTER TABLE "ai_automation_actions" ADD CONSTRAINT "ai_automation_actions_feature_key_fkey" FOREIGN KEY ("feature_key") REFERENCES "ai_automation_features" ("feature_key");
ALTER TABLE "ai_automation_response_tracking" ADD CONSTRAINT "ai_automation_response_tracking_conversation_id_fkey" FOREIGN KEY ("conversation_id") REFERENCES "openphone_conversations" ("id");
ALTER TABLE "ai_automation_response_tracking" ADD CONSTRAINT "ai_automation_response_tracking_feature_key_fkey" FOREIGN KEY ("feature_key") REFERENCES "ai_automation_features" ("feature_key");
ALTER TABLE "ai_automation_rules" ADD CONSTRAINT "ai_automation_rules_feature_id_fkey" FOREIGN KEY ("feature_id") REFERENCES "ai_automation_features" ("id");
ALTER TABLE "ai_automation_usage" ADD CONSTRAINT "ai_automation_usage_feature_id_fkey" FOREIGN KEY ("feature_id") REFERENCES "ai_automation_features" ("id");
ALTER TABLE "ai_prompt_template_history" ADD CONSTRAINT "ai_prompt_template_history_changed_by_fkey" FOREIGN KEY ("changed_by") REFERENCES "users" ("id");
ALTER TABLE "ai_prompt_template_history" ADD CONSTRAINT "ai_prompt_template_history_template_id_fkey" FOREIGN KEY ("template_id") REFERENCES "ai_prompt_templates" ("id");
ALTER TABLE "ai_prompt_templates" ADD CONSTRAINT "ai_prompt_templates_created_by_fkey" FOREIGN KEY ("created_by") REFERENCES "users" ("id");
ALTER TABLE "ai_prompt_templates" ADD CONSTRAINT "ai_prompt_templates_updated_by_fkey" FOREIGN KEY ("updated_by") REFERENCES "users" ("id");
ALTER TABLE "badge_progress" ADD CONSTRAINT "badge_progress_badge_id_fkey" FOREIGN KEY ("badge_id") REFERENCES "badges" ("id");
ALTER TABLE "badge_rules" ADD CONSTRAINT "badge_rules_badge_id_fkey" FOREIGN KEY ("badge_id") REFERENCES "badges" ("id");
ALTER TABLE "badges" ADD CONSTRAINT "badges_season_id_fkey" FOREIGN KEY ("season_id") REFERENCES "seasons" ("id");
ALTER TABLE "booking_participants" ADD CONSTRAINT "booking_participants_booking_share_id_fkey" FOREIGN KEY ("booking_share_id") REFERENCES "booking_shares" ("id");
ALTER TABLE "booking_participants" ADD CONSTRAINT "booking_participants_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "booking_rewards" ADD CONSTRAINT "booking_rewards_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "booking_shares" ADD CONSTRAINT "booking_shares_event_id_fkey" FOREIGN KEY ("event_id") REFERENCES "events" ("id");
ALTER TABLE "booking_shares" ADD CONSTRAINT "booking_shares_shared_by_fkey" FOREIGN KEY ("shared_by") REFERENCES "users" ("id");
ALTER TABLE "booking_shares" ADD CONSTRAINT "booking_shares_team_id_fkey" FOREIGN KEY ("team_id") REFERENCES "teams" ("id");
ALTER TABLE "cc_transactions" ADD CONSTRAINT "cc_transactions_season_id_fkey" FOREIGN KEY ("season_id") REFERENCES "seasons" ("id");
ALTER TABLE "challenge_audit" ADD CONSTRAINT "challenge_audit_challenge_id_fkey" FOREIGN KEY ("challenge_id") REFERENCES "challenges" ("id");
ALTER TABLE "challenge_disputes" ADD CONSTRAINT "challenge_disputes_challenge_id_fkey" FOREIGN KEY ("challenge_id") REFERENCES "challenges" ("id");
ALTER TABLE "challenge_no_shows" ADD CONSTRAINT "challenge_no_shows_challenge_id_fkey" FOREIGN KEY ("challenge_id") REFERENCES "challenges" ("id");
ALTER TABLE "challenge_plays" ADD CONSTRAINT "challenge_plays_challenge_id_fkey" FOREIGN KEY ("challenge_id") REFERENCES "challenges" ("id");
ALTER TABLE "challenge_results" ADD CONSTRAINT "challenge_results_challenge_id_fkey" FOREIGN KEY ("challenge_id") REFERENCES "challenges" ("id");
ALTER TABLE "challenge_winner_selections" ADD CONSTRAINT "challenge_winner_selections_challenge_id_fkey" FOREIGN KEY ("challenge_id") REFERENCES "challenges" ("id");
ALTER TABLE "challenge_winner_selections" ADD CONSTRAINT "challenge_winner_selections_selected_winner_id_fkey" FOREIGN KEY ("selected_winner_id") REFERENCES "users" ("id");
ALTER TABLE "challenge_winner_selections" ADD CONSTRAINT "challenge_winner_selections_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "challenges" ADD CONSTRAINT "challenges_previous_challenge_id_fkey" FOREIGN KEY ("previous_challenge_id") REFERENCES "challenges" ("id");
ALTER TABLE "challenges" ADD CONSTRAINT "challenges_season_id_fkey" FOREIGN KEY ("season_id") REFERENCES "seasons" ("id");
ALTER TABLE "challenges" ADD CONSTRAINT "challenges_settings_catalog_id_fkey" FOREIGN KEY ("settings_catalog_id") REFERENCES "challenge_settings_catalog" ("id");
ALTER TABLE "champion_markers" ADD CONSTRAINT "champion_markers_event_id_fkey" FOREIGN KEY ("event_id") REFERENCES "events" ("id");
ALTER TABLE "checklist_submissions" ADD CONSTRAINT "checklist_submissions_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "clubhouse_announcements" ADD CONSTRAINT "clubhouse_announcements_clubhouse_id_fkey" FOREIGN KEY ("clubhouse_id") REFERENCES "clubhouse_locations" ("id");
ALTER TABLE "clubhouse_announcements" ADD CONSTRAINT "clubhouse_announcements_created_by_fkey" FOREIGN KEY ("created_by") REFERENCES "users" ("id");
ALTER TABLE "contact_sync" ADD CONSTRAINT "contact_sync_matched_user_id_fkey" FOREIGN KEY ("matched_user_id") REFERENCES "users" ("id");
ALTER TABLE "contact_sync" ADD CONSTRAINT "contact_sync_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "customer_profiles" ADD CONSTRAINT "customer_profiles_rarest_achievement_fkey" FOREIGN KEY ("rarest_achievement") REFERENCES "achievements" ("id");
ALTER TABLE "event_participants" ADD CONSTRAINT "event_participants_event_id_fkey" FOREIGN KEY ("event_id") REFERENCES "events" ("id");
ALTER TABLE "event_participants" ADD CONSTRAINT "event_participants_team_id_fkey" FOREIGN KEY ("team_id") REFERENCES "teams" ("id");
ALTER TABLE "event_participants" ADD CONSTRAINT "event_participants_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "events" ADD CONSTRAINT "events_created_by_fkey" FOREIGN KEY ("created_by") REFERENCES "users" ("id");
ALTER TABLE "events" ADD CONSTRAINT "events_team_id_fkey" FOREIGN KEY ("team_id") REFERENCES "teams" ("id");
ALTER TABLE "events" ADD CONSTRAINT "events_winner_team_id_fkey" FOREIGN KEY ("winner_team_id") REFERENCES "teams" ("id");
ALTER TABLE "events" ADD CONSTRAINT "events_winner_user_id_fkey" FOREIGN KEY ("winner_user_id") REFERENCES "users" ("id");
ALTER TABLE "friend_activities" ADD CONSTRAINT "friend_activities_event_id_fkey" FOREIGN KEY ("event_id") REFERENCES "events" ("id");
ALTER TABLE "friend_activities" ADD CONSTRAINT "friend_activities_friend_id_fkey" FOREIGN KEY ("friend_id") REFERENCES "users" ("id");
ALTER TABLE "friend_activities" ADD CONSTRAINT "friend_activities_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "friend_group_members" ADD CONSTRAINT "friend_group_members_group_id_fkey" FOREIGN KEY ("group_id") REFERENCES "friend_groups" ("id");
ALTER TABLE "friend_group_members" ADD CONSTRAINT "friend_group_members_invited_by_fkey" FOREIGN KEY ("invited_by") REFERENCES "users" ("id");
ALTER TABLE "friend_group_members" ADD CONSTRAINT "friend_group_members_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "friend_groups" ADD CONSTRAINT "friend_groups_owner_id_fkey" FOREIGN KEY ("owner_id") REFERENCES "users" ("id");
ALTER TABLE "friend_notification_preferences" ADD CONSTRAINT "friend_notification_preferences_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "friend_suggestions" ADD CONSTRAINT "friend_suggestions_suggested_user_id_fkey" FOREIGN KEY ("suggested_user_id") REFERENCES "users" ("id");
ALTER TABLE "friend_suggestions" ADD CONSTRAINT "friend_suggestions_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "friendships" ADD CONSTRAINT "friendships_blocked_by_fkey" FOREIGN KEY ("blocked_by") REFERENCES "users" ("id");
ALTER TABLE "friendships" ADD CONSTRAINT "friendships_friend_id_fkey" FOREIGN KEY ("friend_id") REFERENCES "users" ("id");
ALTER TABLE "friendships" ADD CONSTRAINT "friendships_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "knowledge_extraction_log" ADD CONSTRAINT "knowledge_extraction_log_knowledge_id_fkey" FOREIGN KEY ("knowledge_id") REFERENCES "knowledge_store" ("id");
ALTER TABLE "knowledge_extraction_log" ADD CONSTRAINT "knowledge_extraction_log_pattern_id_fkey" FOREIGN KEY ("pattern_id") REFERENCES "knowledge_patterns" ("id");
ALTER TABLE "knowledge_patterns" ADD CONSTRAINT "knowledge_patterns_current_best_source_fkey" FOREIGN KEY ("current_best_source") REFERENCES "knowledge_store" ("id");
ALTER TABLE "knowledge_store" ADD CONSTRAINT "knowledge_store_created_by_fkey" FOREIGN KEY ("created_by") REFERENCES "users" ("id");
ALTER TABLE "knowledge_store" ADD CONSTRAINT "knowledge_store_superseded_by_fkey" FOREIGN KEY ("superseded_by") REFERENCES "knowledge_store" ("id");
ALTER TABLE "message_suggestions" ADD CONSTRAINT "message_suggestions_approved_by_fkey" FOREIGN KEY ("approved_by") REFERENCES "users" ("id");
ALTER TABLE "message_suggestions" ADD CONSTRAINT "message_suggestions_created_by_fkey" FOREIGN KEY ("created_by") REFERENCES "users" ("id");
ALTER TABLE "notification_history" ADD CONSTRAINT "notification_history_subscription_id_fkey" FOREIGN KEY ("subscription_id") REFERENCES "push_subscriptions" ("id");
ALTER TABLE "notification_history" ADD CONSTRAINT "notification_history_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "notification_preferences" ADD CONSTRAINT "notification_preferences_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "openphone_conversations" ADD CONSTRAINT "openphone_conversations_knowledge_id_fkey" FOREIGN KEY ("knowledge_id") REFERENCES "knowledge_store" ("id");
ALTER TABLE "push_subscriptions" ADD CONSTRAINT "push_subscriptions_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "rank_assignments" ADD CONSTRAINT "rank_assignments_season_id_fkey" FOREIGN KEY ("season_id") REFERENCES "seasons" ("id");
ALTER TABLE "rank_history" ADD CONSTRAINT "rank_history_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "remote_action_history" ADD CONSTRAINT "remote_action_history_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "scoreboards" ADD CONSTRAINT "scoreboards_event_id_fkey" FOREIGN KEY ("event_id") REFERENCES "events" ("id");
ALTER TABLE "scoreboards" ADD CONSTRAINT "scoreboards_team_id_fkey" FOREIGN KEY ("team_id") REFERENCES "teams" ("id");
ALTER TABLE "seasonal_cc_earnings" ADD CONSTRAINT "seasonal_cc_earnings_season_id_fkey" FOREIGN KEY ("season_id") REFERENCES "seasons" ("id");
ALTER TABLE "stakes" ADD CONSTRAINT "stakes_challenge_id_fkey" FOREIGN KEY ("challenge_id") REFERENCES "challenges" ("id");
ALTER TABLE "stakes" ADD CONSTRAINT "stakes_lock_transaction_id_fkey" FOREIGN KEY ("lock_transaction_id") REFERENCES "cc_transactions" ("id");
ALTER TABLE "stakes" ADD CONSTRAINT "stakes_refund_transaction_id_fkey" FOREIGN KEY ("refund_transaction_id") REFERENCES "cc_transactions" ("id");
ALTER TABLE "team_members" ADD CONSTRAINT "team_members_invited_by_fkey" FOREIGN KEY ("invited_by") REFERENCES "users" ("id");
ALTER TABLE "team_members" ADD CONSTRAINT "team_members_team_id_fkey" FOREIGN KEY ("team_id") REFERENCES "teams" ("id");
ALTER TABLE "team_members" ADD CONSTRAINT "team_members_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "teams" ADD CONSTRAINT "teams_captain_id_fkey" FOREIGN KEY ("captain_id") REFERENCES "users" ("id");
ALTER TABLE "teams" ADD CONSTRAINT "teams_created_by_fkey" FOREIGN KEY ("created_by") REFERENCES "users" ("id");
ALTER TABLE "ticket_comments" ADD CONSTRAINT "ticket_comments_ticket_id_fkey" FOREIGN KEY ("ticket_id") REFERENCES "tickets" ("id");
ALTER TABLE "usage_logs" ADD CONSTRAINT "usage_logs_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "user_achievements" ADD CONSTRAINT "user_achievements_achievement_id_fkey" FOREIGN KEY ("achievement_id") REFERENCES "achievements" ("id");
ALTER TABLE "user_achievements" ADD CONSTRAINT "user_achievements_awarded_by_fkey" FOREIGN KEY ("awarded_by") REFERENCES "users" ("id");
ALTER TABLE "user_achievements" ADD CONSTRAINT "user_achievements_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");
ALTER TABLE "user_badges" ADD CONSTRAINT "user_badges_badge_id_fkey" FOREIGN KEY ("badge_id") REFERENCES "badges" ("id");
ALTER TABLE "user_badges" ADD CONSTRAINT "user_badges_season_id_fkey" FOREIGN KEY ("season_id") REFERENCES "seasons" ("id");
ALTER TABLE "user_clubhouses" ADD CONSTRAINT "user_clubhouses_clubhouse_id_fkey" FOREIGN KEY ("clubhouse_id") REFERENCES "clubhouse_locations" ("id");
ALTER TABLE "user_clubhouses" ADD CONSTRAINT "user_clubhouses_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "users" ("id");